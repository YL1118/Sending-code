# -*- coding: utf-8 -*-
# rename_drop_txt.py
from pathlib import Path
import os

# === ä¿®æ”¹é€™è£¡ ===
ROOT = Path("test_json_more_forall")  # æ ¹ç›®éŒ„
DRY_RUN = False                       # True=åƒ…åˆ—å°ä¸åŸ·è¡Œï¼›False=çœŸçš„æ”¹å
# =================

def main():
    count = 0
    for path in ROOT.rglob("*.txt.json"):   # éè¿´å°‹æ‰¾æ‰€æœ‰ xxx.txt.json
        new_name = path.with_name(path.name.replace(".txt.json", ".json"))
        if new_name.exists():
            print(f"âš ï¸ ç›®æ¨™å·²å­˜åœ¨ï¼Œç•¥éï¼š{new_name}")
            continue

        if DRY_RUN:
            print(f"[è©¦è·‘] {path} -> {new_name}")
        else:
            os.rename(path, new_name)
            print(f"âœ” {path} -> {new_name}")
            count += 1

    print(f"ğŸ‰ å…¨éƒ¨å®Œæˆï¼Œå…±è™•ç† {count} å€‹æª”æ¡ˆ")

if __name__ == "__main__":
    main()
